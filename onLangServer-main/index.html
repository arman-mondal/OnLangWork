<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Call Start</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://static.learncube.net/client/virtualclassroom.css"
    />
    <script
      type="text/javascript"
      src="https://static.learncube.net/client/virtualclassroom.js"
    ></script>
  </head>

  <body>
    <div id="virtual-classroom-client"></div>
    <script type="text/javascript">
      function getQueryParam(name) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(name);
      }

      const token = getQueryParam("token");
      const userid = getQueryParam("userid");
      const username = getQueryParam("username");
      const userType = getQueryParam("userType");
      const classid = getQueryParam("classid");

      const classroom = new VirtualClassroom("#virtual-classroom-client", {
        token: token,
        userid: userid,
        username: username,
        publicKey: "c43a1f4eb2ac80bdbfff9baf",
        userType: userType,
        validateUrl: "/classes/get-valid-token/",
        instantClass: true,
        classid: classid,
      });

      classroom.addEventListener("enterBreakoutRoom", (evt) => {
        console.log(evt.detail);
      });
      classroom.addEventListener("enterClass", (evt) => {
        console.log(evt.detail);
      });
      classroom.addEventListener("exitClass", (evt) => {
        window.location.href = "https://onlang.net/";
        console.log(evt.detail);
      });
      classroom.addEventListener("updateClassStatus", (evt) => {
        console.log(evt.detail);
      });
    </script>
  </body>
</html>
